const CryptoJS = require('crypto-js')

//_tanN
function _taN() {
    return {
        sdkv: "\u0033\u002e\u0030\u002e\u0031",
        busurl: "https://api.anjuke.com/web/general/captchaNew.html",
        useragent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36',
        clienttype: '1'
    };
}

function AESEncrypt(taN, _2undefinedp) {
    // if (taN !== _taN()){
    //     taN = _taN()
    // }
    _2undefinedp = _2undefinedp['split']('')['reduce'](
        function(_PUi, _JrX, _JP9) {
            return _JP9 % 2 == 0 ? _PUi + '' : _PUi + _JrX;
        }, '');
    _2undefinedp = CryptoJS.enc.Utf8.parse(_2undefinedp)
    let encode_data = CryptoJS.AES.encrypt(JSON.stringify(taN), _2undefinedp, {
        iv: _2undefinedp,
        mode: CryptoJS.mode.CBC,
        padding: CryptoJS.pad.Pkcs7
    })
    return encodeURIComponent(encode_data.toString());
}

const track = {
    x: 123,
    track: "29,21,1|30,21,17|31,21,20|32,21,26|32,21,27|33,21,30|34,21,33|35,21,34|36,21,37|36,21,38|37,21,40|38,21,41|39,21,44|40,21,45|40,21,46|41,21,48|42,21,48|43,21,51|44,21,52|44,21,53|45,21,55|47,21,55|48,21,58|48,21,58|49,21,59|51,21,62|52,21,64|53,21,65|57,21,71|58,21,72|59,21,72|60,21,73|61,21,76|64,21,77|64,21,77|66,21,78|67,21,80|68,21,80|69,21,82|70,21,83|72,21,85|73,21,86|75,21,87|76,21,87|76,21,89|77,20,89|79,20,91|80,20,91|80,20,93|82,20,93|83,20,95|84,20,95|85,20,97|86,20,98|87,20,99|88,20,100|90,20,102|92,20,104|93,20,105|94,20,106|96,20,108|96,20,109|97,20,109|99,20,111|100,20,113|101,20,114|102,20,115|103,20,116|104,20,118|106,20,119|107,20,121|108,19,121|109,19,124|110,19,124|111,19,126|112,19,127|114,19,129|115,18,129|116,18,131|116,18,131|117,18,133|118,18,134|119,18,135|120,17,136|121,17,137|122,17,138|124,17,140|124,17,141|126,17,143|128,17,143|128,17,146|130,17,146|131,17,149|132,17,150|134,17,152|135,17,153|135,16,153|136,16,154|137,16,156|138,16,158|139,15,158|140,15,161|141,15,161|142,15,164|143,15,165|144,15,168|144,15,169|145,15,169|146,15,173|147,15,175|148,15,178|148,14,179|148,14,180|149,14,183|150,14,191|151,14,194|151,13,198|152,13,210|152,13,333|",
    p: [0, 0]
}

data = AESEncrypt(track, 'e137c29cff2c442d911bfdd586c52458')
console.log(data)
console.log(data.length)



// var _session = "2ce11cc9150f449b80926be814c9a6f8"


// var data = AESEncrypt(track, _session)
// console.log(data.length)
// console.log(data)